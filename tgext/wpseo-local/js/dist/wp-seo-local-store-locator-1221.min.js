!function(){function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){return e(b[g][1][a]||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}return a}()({1:[function(a,b,c){"use strict";function d(a){return function(){var b=a.apply(this,arguments);return new Promise(function(a,c){function d(e,f){try{var g=b[e](f),h=g.value}catch(a){return void c(a)}if(!g.done)return Promise.resolve(h).then(function(a){d("next",a)},function(a){d("throw",a)});a(h)}return d("next")})}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(){function a(){e(this,a)}return g(a,null,[{key:"geoCodeAddress",value:function(){function a(a){return b.apply(this,arguments)}var b=d(regeneratorRuntime.mark(function a(b){var c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(c=new google.maps.Geocoder,"object"!==(void 0===b?"undefined":f(b))){a.next=3;break}return a.abrupt("return",new Promise(function(a,d){c.geocode(b,function(b,c){return"OK"===c?a(b):d(c)})}));case 3:throw new Error("Location should be an object");case 4:case"end":return a.stop()}},a,this)}));return a}()}]),a}();c.default=h},{}],2:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){return function(){var b=a.apply(this,arguments);return new Promise(function(a,c){function d(e,f){try{var g=b[e](f),h=g.value}catch(a){return void c(a)}if(!g.done)return Promise.resolve(h).then(function(a){d("next",a)},function(a){d("throw",a)});a(h)}return d("next")})}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("./wp-seo-local-geocoding-repository.js"),i=d(h);(new(function(){function a(){f(this,a),this.searchForm=document.querySelector("#wpseo-storelocator-form"),this.searchInput=document.querySelector("#wpseo-sl-search"),this.locationDetectionButton=document.querySelector(".wpseo_use_current_location"),this.locationDetectionButtonImg=document.querySelector(".wpseo_use_current_location img"),this.latField=document.querySelector("#wpseo-sl-lat"),this.lngField=document.querySelector("#wpseo-sl-lng"),this.latLng="",this.locationDetection=this.locationDetection.bind(this),this.getLatLng=this.getLatLng.bind(this),this.maybeGeoCodeAddress=this.maybeGeoCodeAddress.bind(this),this.handleSubmitForm=this.handleSubmitForm.bind(this)}return g(a,[{key:"addEventListeners",value:function(){document.addEventListener("click",this.locationDetection),document.addEventListener("change",this.maybeGeoCodeAddress),document.addEventListener("submit",this.handleSubmitForm)}},{key:"locationDetection",value:function(){function a(a){return b.apply(this,arguments)}var b=e(regeneratorRuntime.mark(function a(b){var c,d,e;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b.target!==this.locationDetectionButton&&b.target!==this.locationDetectionButtonImg){a.next=25;break}return c=this.locationDetectionButton.dataset.target,d=document.querySelector("#"+c),a.prev=3,a.next=6,this.getLatLng();case 6:this.latLng=a.sent,this.latField.value=this.latLng.lat,this.lngField.value=this.latLng.lng,a.next=14;break;case 11:a.prev=11,a.t0=a.catch(3),console.log(a.t0);case 14:if(!1!=this.latLng instanceof Error){a.next=25;break}return a.prev=15,a.next=18,i.default.geoCodeAddress({location:this.latLng});case 18:e=a.sent,d.value=e[0].formatted_address,a.next=25;break;case 22:a.prev=22,a.t1=a.catch(15),console.log(a.t1);case 25:case"end":return a.stop()}},a,this,[[3,11],[15,22]])}));return a}()},{key:"getLatLng",value:function(){function a(){return b.apply(this,arguments)}var b=e(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise(function(a,b){navigator.geolocation.getCurrentPosition(function(b){return a({lat:parseFloat(b.coords.latitude),lng:parseFloat(b.coords.longitude)})},function(a){return b(new Error("Location detection unsuccesfull"))})}));case 1:case"end":return a.stop()}},a,this)}));return a}()},{key:"maybeGeoCodeAddress",value:function(){function a(a){return b.apply(this,arguments)}var b=e(regeneratorRuntime.mark(function a(b){var c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b.target!==this.searchInput){a.next=11;break}return a.prev=1,a.next=4,i.default.geoCodeAddress({address:this.searchInput.value});case 4:c=a.sent,this.latField.value=c[0].geometry.location.lat(),this.lngField.value=c[0].geometry.location.lng(),a.next=11;break;case 9:a.prev=9,a.t0=a.catch(1);case 11:case"end":return a.stop()}},a,this,[[1,9]])}));return a}()},{key:"handleSubmitForm",value:function(){function a(a){return b.apply(this,arguments)}var b=e(regeneratorRuntime.mark(function a(b){var c,d,f=this;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b.target!==this.searchForm){a.next=12;break}if(b.preventDefault(),""!==this.latField.value&&""!==this.lngField.value){a.next=11;break}return document.removeEventListener("submit",this.handleSubmitForm),c=new Promise(function(){var a=e(regeneratorRuntime.mark(function a(b,c){var d;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.default.geoCodeAddress({address:f.searchInput.value});case 2:d=a.sent,f.latField.value=d[0].geometry.location.lat(),f.lngField.value=d[0].geometry.location.lng(),""!==f.latField.value&&""!==f.lngField.value&&b("success");case 6:case"end":return a.stop()}},a,f)}));return function(b,c){return a.apply(this,arguments)}}()),a.next=7,c;case 7:d=a.sent,"success"===d&&this.searchForm.submit(),a.next=12;break;case 11:this.searchForm.submit();case 12:case"end":return a.stop()}},a,this)}));return a}()}]),a}())).addEventListeners()},{"./wp-seo-local-geocoding-repository.js":1}]},{},[2]);