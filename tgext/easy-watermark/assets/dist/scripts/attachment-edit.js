!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="../",n(n.s=21)}({0:function(t,e){t.exports=jQuery},1:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return c}));var r=n(0),i=n.n(r);function s(t,e="info"){const n=i()(document.createElement("div")),r=i()(document.createElement("p")),s=i()(document.createElement("button"));n.addClass("notice notice-"+e+" is-dismissible").hide(),s.addClass("notice-dismiss"),r.html(t),n.append(r).append(s),s.on("click",t=>{t.preventDefault(),n.fadeOut(200,()=>{n.remove()})}),i()("hr.wp-header-end").after(n),n.fadeIn(200)}function a(t,e=!1,n=!0){let r=t.length;for(const i of t.clone().models)(!c(i)||i.get("usedAsWatermark")||!0===e&&!i.get("hasBackup"))&&(!0===n&&t.remove(i),r--);return r}function o(t,e){const n=t.indexOf("?");return-1!==n&&(t=t.substr(0,n)),t+="?v="+e}function c(t){return"object"==typeof t&&t.get&&(t=t.get("mime")),Object.keys(ew.mime).includes(t)}},21:function(t,e,n){"use strict";n.r(e);n(28);var r=n(0),i=n.n(r),s=n(1);new class{constructor(){this.handleClick=this.handleClick.bind(this),this.metabox=i()("#watermarks"),this.metaboxContent=this.metabox.find(".watermarks-metabox"),this.errorMessage=this.metabox.find(".error-message"),this.spinners=this.metabox.find(".spinner"),this.buttons=this.metabox.find("button"),this.form=i()("form#post"),this.postID=this.form.find("#post_ID").val(),this.headerEnd=i()("hr.wp-header-end"),this.image=i()(".wp_attachment_image img.thumbnail"),this.metabox.on("click","button",this.handleClick)}handleClick(t){t.preventDefault();const e=i()(t.target),n=e.data("action");this.buttons.prop("disabled",!0),e.next(".spinner").css("visibility","visible"),this.errorMessage.hide();const r={action:"easy-watermark/"+n,nonce:e.data("nonce"),attachment_id:this.postID};"apply_single"===n&&(r.watermark=e.data("watermark")),i.a.ajax(ajaxurl,{data:r}).done(t=>{if(!0===t.success){if(this.metaboxContent.replaceWith(t.data.metaboxContent),this.metaboxContent=this.metabox.find(".watermarks-metabox"),this.errorMessage=this.metabox.find(".error-message"),this.spinners=this.metabox.find(".spinner"),this.buttons=this.metabox.find("button"),t.data.attachmentVersion){const e=Object(s.c)(this.image.attr("src"),t.data.attachmentVersion);this.image.attr("src",e),"string"==typeof t.data.message&&Object(s.a)(t.data.message,"success")}}else{const e="string"==typeof t.data.message?t.data.message:ew.genericErrorMessage;Object(s.a)(e,"error")}}).fail(()=>{Object(s.a)(ew.genericErrorMessage,"error")}).complete(()=>{this.spinners.css("visibility","hidden"),this.buttons.prop("disabled",!1)})}}},28:function(t,e){}});